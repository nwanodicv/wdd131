if(!customElements.get("recently-viewed")){class a extends HTMLElement{constructor(){super(),this.id=this.dataset.articleId,this.recentlyViewed={recent:[],articleInfo:{}},this.localStorage=window.localStorage.getItem("theme-recent"),this.template=this.querySelector("template"),this.localStorage&&(this.recentlyViewed.recent=JSON.parse(this.localStorage)),this.observerElement=this.previousElementSibling;const t=this;this.observer=new IntersectionObserver(function(e){0<e[0].intersectionRatio&&t.getPosts()},{threshold:[0,1],rootMargin:"0% 0% 200px 0%"})}connectedCallback(){this.addCurrent(),this.observer.observe(this.observerElement)}addCurrent(){var e=this.recentlyViewed.recent.indexOf(this.id);-1!==e&&this.recentlyViewed.recent.splice(e,1),this.recentlyViewed.recent.push(this.id),5<this.recentlyViewed.recent.length&&this.recentlyViewed.recent.shift(),window.localStorage.setItem("theme-recent",JSON.stringify(this.recentlyViewed.recent))}getPosts(){fetch(themeajax.blog_url+"/wp-json/sstk/recenty_viewed",{method:"POST",body:JSON.stringify(this.recentlyViewed.recent)}).then(e=>e.json()).then(e=>{let t="",r=JSON.parse(e);r.forEach(e=>{t+=this.interpolate(this.template.innerHTML,e)}),this.querySelector(".row").innerHTML=t,this.classList.add("sstk-recently-viewed--loaded")})}interpolate(e,t){var r=Object.keys(t),t=Object.values(t);return new Function(...r,`return \`${e}\`;`)(...t)}}customElements.define("recently-viewed",a)}